# 应用场景
## 宠物定位项圈
### 介绍
宠物定位项圈是本物联网的出发点,下面简称项圈.<br />项圈是为了解决宠物猫狗走失后难以找回的问题.由于淘宝上售卖的项圈贵则五六百,便宜的也要两百多,实在是利润惊人.而产品及UI极其丑陋,所以我们打算以项圈为目标进入物联网领域积攒经验.<br />项圈需要实现以下功能:

1. 电子围栏:主人设置了电子围栏后,当宠物跑过该范围时,会以铃声,微信消息等方式通知主人
1. 历史轨迹:主人可以实时查看宠物的运动轨迹,获取小宠的游玩路线
1. 实时轨迹:主人可以看到宠物的实时位置,并看到和自己的距离等信息
1. 追踪导航:可以调用导航软件追踪小宠
1. 鸣叫追宠:可以下发指令,控制项圈鸣叫,获取藏匿位置
1. 状态收集:可以收集设备定时发来的状态或可以获取最新的设备状态,如定位搜到的卫星数量,电池电量,网络信号等
### 云平台支撑
为了实现以上几点功能,云平台需要提供以下几个能力:

1. 数据入库: 能够查询任意时刻的轨迹记录,能够支持历史轨迹功能
1. 消息订阅实时推送: 用户订阅了项圈的定位信息后能够在设备上报后实时推送到手机端以支持实时轨迹功能
1. 数据模板: 为了能够实现多种信息的收集及查询功能就需要实现数据模板化,设备发送的信息都是有模板的,服务端收集后进行对应的处理及入库及消息通知用户
1. 设备控制: 为了实现对设备的控制则需要能够对设备进行主动发信,用户通过http发送到云端,云端转成模板化的mqtt协议发送给设备实现交互
1. 数据流转: 为了实现电子围栏的自动通知功能则需要实现低代码将超出围栏和微信通知主人这几个时间形成数据流,这个低代码可以由客户端编写,也可由服务器端编写,服务器端编写的话客户端通过通用接口启用指定流程即可
1. 家庭组: 能够将设备共享给家庭成员,家庭成员拥有读写设备的权限,设备的绑定者则拥有设备的管理权限

**关键字**:**数据模板,数据入库,消息订阅实时推送,设备控制,低代码数据流转,家庭组**<br />**​**<br />
## 智能家居平台
### 介绍
智能家居是由一系列的可联网,可交互的设备组成.通过深度学习或用户的设置能够互相连接互相控制的一种无缝体验.<br />智能家居需要实现以下几个通用的功能:

1. 信息收集: 可以收集设备定时发来的状态或可以获取最新的设备状态,如电饭煲焖饭的进度,智能冰箱的温度及结冰程度等
1. 设备控制:能够修改设备的状态如灯的开关,能够控制设备做一些操作如电饭煲焖饭
1. 实时获取:有些设备由于功耗的原因可能很久才上报一次,就需要提供一个云能够主动获取设备的最新状态的功能
1. 数据流转:单个设备的控制及收集是体现不出智能家居的,需要将各个设备联合起来如智能门识别到主人回来自动打开灯光,自动打开热水器,打开窗帘等一系列的操作
1. 家庭组: 能够将设备共享给家庭成员,家庭成员拥有读写设备的权限,设备的绑定者则拥有设备的管理权限



### 云平台支撑

1. 数据入库: 需要将各个设备的状态机操作信息放入到数据库中同时可以随时查看,方便分析
1. 设备控制: 云平台能够和设备主动交互,并提供接口桥梁给用户及内部使用
1. 消息订阅实时推送:为了实现实时获取,需要能够对订阅某个消息的用户进行实时转发
1. 数据流转: 需要提供设备的流式的控制,需要提供拖拉机低代码的方式给用户及后台进行编辑,无缝使用
1. 家庭组: 需要实现设备和用户绑定并可以对权限进行控制,只有家庭组内的成员才有读写权限

**关键字**:**数据模板,数据入库,消息订阅实时推送,设备控制,低代码数据流转,家庭组**<br />**​**<br />
## 工业物联网
### 介绍
工业物联网是由一系列设备组成流水线,如物流仓库的分拣平台分拣车,流水线上的多个设备协作<br />工业物联网需要实现以下几个通用的功能:

1. 信息收集: 可以收集设备定时发来的状态或可以获取最新的设备状态,如设备的耗电量工作效率等
1. 网关控制: 在一个流水线或一个设备组中如果还要通过服务器进行交互则可能会延时太大,所以需要服务器的部分功能在网关可以控制,如数据流转,权限控制
1. 实时获取:工业物联网对延迟比较敏感,所以这个点也是非常重要的
1. 数据流转:在工业物联网中,需要很多设备进行实时交互,所以数据流转需要提供及时方便的数据流转功能



### 云平台支撑

1. 数据入库:  需要将各个设备的状态机操作信息放入到数据库中同时可以随时查看,方便分析
1. 家庭组:  网关控制设备则如智能家居场景一般创建了个家庭组,网关是主人,可以对组中的设备进行管理及设备流转
1. 消息订阅实时推送:为了实现实时获取,需要能够对订阅某个消息的用户进行实时转发同时需要能够提供低延迟的消息推送能力
1. 数据流转: 需要提供设备的流式的控制,需要提供拖拉机低代码的方式给用户及后台进行编辑,无缝使用

**关键字**:**数据模板,数据入库,消息订阅实时推送,设备控制,低代码数据流转,家庭组**<br />**​**

**​**<br />
## 总结
从以上几个项目中可以看出物联网平台需要的能力是相对通用的:

1. **数据入库**: 历史数据记录
1. **家庭组**: 设备与人或网关绑定,权限控制
1. **消息订阅实时推送**: 获取设备的最新状态
1. **数据模板**: 数据模板是一切的基础,规范化数据格式可以很方便的进行数据处理
1. **设备控制**: 设备不仅仅需要获取状态,也需要可以控制设备
1. **低代码数据流转**: 由于物联网的通用性,及使用者需要对设备的交互进行独特控制就需要有一些编程能力,这时候低代码就能很好的解决用户不会编程的缺点,同时大大提高了灵活性和拓展性
